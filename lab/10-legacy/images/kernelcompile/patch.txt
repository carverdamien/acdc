diff --git a/mm/rmap.c b/mm/rmap.c
index 8a839935b18c..0ea5d9071b32 100644
--- a/mm/rmap.c
+++ b/mm/rmap.c
@@ -1098,6 +1098,8 @@  void page_move_anon_rmap(struct page *page,
 
	VM_BUG_ON_PAGE(!PageLocked(page), page);
 	VM_BUG_ON_VMA(!anon_vma, vma);
+	if (IS_ENABLED(CONFIG_DEBUG_VM) && PageTransHuge(page))
+	   address &= HPAGE_PMD_MASK;
 	   VM_BUG_ON_PAGE(page->index != linear_page_index(vma, address), page);
 
	anon_vma = (void *) anon_vma + PAGE_MAPPING_ANON;
